---
- name: Install APT package for Debian 
  include_vars: debian/apt.yml
  block:
  - name: Update/Upgrade apt
    apt:
      update_cache: true
      upgrade: dist

  - name: Manage apt packages
    apt:
      name: "{{ item.key }}"
      state: "{{ item.value.state | default('latest') }}"
    with_dict: "{{apt}}"

  become: true
  when: ansible_os_family == "Debian"

# TODO: update with brew
- name: Install Brew package for Darwin 
  include_vars: darwin/apt.yml
  block:
  - name: Update/Upgrade apt
    apt:
      update_cache: true
      upgrade: dist

  - name: Manage apt packages
    apt:
      name: "{{ item.key }}"
      state: "{{ item.value.state | default('latest') }}"
    with_dict: "{{apt}}"

  become: true
  when: ansible_os_family == "Darwin"

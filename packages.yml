---
- name: Include APT package list
  block:
  - include_vars: debian/apt.yml
  - name: Update/Upgrade apt
    apt:
      update_cache: true
      upgrade: dist
  - name: Manage apt packages
    apt:
      name: "{{ item.key }}"
      state: "{{ item.value.state | default('latest') }}"
    with_dict: "{{apt}}"
  when: ansible_os_family == "Debian"
  become: true
  
# TODO: fix
# - name: Install Brew package for Darwin 
#   block:
#   - include_vars: darwin/apt.yml
#   - name: Update/Upgrade apt
#     apt:
#       update_cache: true
#       upgrade: dist

#   - name: Manage apt packages
#     apt:
#       name: "{{ item.key }}"
#       state: "{{ item.value.state | default('latest') }}"
#     with_dict: "{{apt}}"
#   when: ansible_os_family == "Darwin"
#   become: true